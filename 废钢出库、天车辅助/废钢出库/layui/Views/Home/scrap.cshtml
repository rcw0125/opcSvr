
@{
    Layout = null;
    var userid = ViewBag.userid;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>废钢出库</title>
    <link href="~/plugin/layui/css/layui.css" type="text/css" rel="stylesheet" />
   
</head>
<body>

    <div class="layui-form" style="margin-top:10px">

        <div class="layui-form-item" style="font-size: 28px;">

            <div class="layui-inline layui-hide">
                <label class="layui-form-label">用户账号</label>
                <div class="layui-input-inline">
                    <input id="userid" placeholder="请输入字符" autocomplete="off" readonly="readonly" class="layui-input" value=@userid>
                </div>
            </div>

            <div class="layui-inline">
                <label class="layui-form-label" style="color:#FFB800">斗号</label>
                <div class="layui-input-inline">
                    <input id="slot" placeholder="" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label" style="color:#FFB800">废钢</label>
                <div class="layui-input-inline">
                    <select id="fg" name="fenlei">
                        <option value="fg0" selected=""></option>
                        <option value="fg4">普通废钢</option>
                        <option value="fg24">超低碳废钢</option>
                        <option value="fg2">低铬废钢</option>
                        <option value="fg3">高铬废钢</option>
                        <option value="fg12">含铬钼废钢</option>
                        <option value="fg6">含硫废钢</option>
                        <option value="fg8">含镍废钢</option>
                        <option value="fg7">含硼钛废钢</option>
                        <option value="fg10">含铜废钢</option>
                        <option value="fg5">含钼废钢</option>
                        <option value="fg13">帘线钢废钢</option>
                        <option value="fg11">三选废钢</option>
                        <option value="fg19">碎钢</option>
                        <option value="fg9">特殊废钢</option>
                        <option value="fg26">脱硫渣</option>
                        <option value="fg17">外购工业废钢</option>
                        <option value="fg22">外购冷料</option>
                        <option value="fg20">外购轻废</option>
                        <option value="fg21">外购重废</option>
                        <option value="fg23">自产废钢</option>
                        <option value="fg16">自产片钢</option>
                        <option value="fg18">中包块、坯头坯尾</option>
                        <option value="fg25">DS100废钢</option>
                        <option value="fg14">H13废钢</option>
                        <option value="fg15">XTCr5A（B）废钢</option>

                    </select>
                </div>
                <label class="layui-form-label" style="color:#FFB800">重量</label>
                <div class="layui-input-inline">
                    <input id="weight" placeholder="请输入数字" autocomplete="off" class="layui-input" value="0">
                </div>
            </div>
        </div>

        <div class="layui-form-item" style="font-size: 28px;">
            <div class="layui-collapse" style="margin-top:10px">
                <div class="layui-colla-item">
                    <h2 class="layui-colla-title">废钢选择2</h2>
                    <div class="layui-colla-content layui-collapse">

                        <div class="layui-inline">
                            <label class="layui-form-label" style="color:#FFB800">废钢2</label>
                            <div class="layui-input-inline">
                                <select id="fg1" name="fenlei">
                                    <option value="fg0" selected=""></option>
                                    <option value="fg4">普通废钢</option>
                                    <option value="fg24">超低碳废钢</option>
                                    <option value="fg2">低铬废钢</option>
                                    <option value="fg3">高铬废钢</option>
                                    <option value="fg12">含铬钼废钢</option>
                                    <option value="fg6">含硫废钢</option>
                                    <option value="fg8">含镍废钢</option>
                                    <option value="fg7">含硼钛废钢</option>
                                    <option value="fg10">含铜废钢</option>
                                    <option value="fg5">含钼废钢</option>
                                    <option value="fg13">帘线钢废钢</option>
                                    <option value="fg11">三选废钢</option>
                                    <option value="fg19">碎钢</option>
                                    <option value="fg9">特殊废钢</option>
                                    <option value="fg26">脱硫渣</option>
                                    <option value="fg17">外购工业废钢</option>
                                    <option value="fg22">外购冷料</option>
                                    <option value="fg20">外购轻废</option>
                                    <option value="fg21">外购重废</option>
                                    <option value="fg23">自产废钢</option>
                                    <option value="fg16">自产片钢</option>
                                    <option value="fg18">中包块、坯头坯尾</option>
                                    <option value="fg25">DS100废钢</option>
                                    <option value="fg14">H13废钢</option>
                                    <option value="fg15">XTCr5A（B）废钢</option>
                                </select>
                            </div>
                            <label class="layui-form-label" style="color:#FFB800">重量2</label>
                            <div class="layui-input-inline">
                                <input id="weight1" placeholder="请输入数字" autocomplete="off" class="layui-input" value="0">
                            </div>
                        </div>

                    </div>
                </div>

            </div>
        </div>


        <div class="layui-form-item" style="font-size: 28px;">
            <div class="layui-collapse" style="margin-top:10px">
                <div class="layui-colla-item">
                    <h2 class="layui-colla-title">生铁选择</h2>
                    <div class="layui-colla-content layui-collapse">

                        <div class="layui-form-item">
                            <div class="layui-inline">
                                <label class="layui-form-label" style="color:#FFB800">生铁</label>
                                <div class="layui-input-inline">
                                    <select id="st" name="fenlei">
                                        <option value="st0" selected=""></option>
                                        <option value="st1">外购生铁</option>
                                        <option value="st2">渣沟铁</option>
                                        <option value="st3">号外铁</option>
                                        <option value="st4">自产生铁</option>
                                        <option value="st5">海绵铁</option>
                                        <option value="st6">脱硫生铁</option>
                                        <option value="st7">脱硫碎铁</option>
                                        <option value="st8">大渣铁</option>
                                        <option value="st9">脱硫渣</option>
                                    </select>
                                </div>
                                <label class="layui-form-label" style="color:#FFB800">重量</label>
                                <div class="layui-input-inline">
                                    <input id="stweight" placeholder="请输入数字" autocomplete="off" class="layui-input" value="0">
                                </div>
                            </div>
                        </div>


                    </div>
                </div>
            </div>
        </div>
      



        <div style="margin-top:10px">
            <button class="layui-btn layui-btn-fluid" id="btnup" onclick="scrapout()">废钢出库,上传数据</button>
        </div>
      
        <div style="margin-top:10px">
            <button class="layui-btn layui-btn-fluid layui-btn-danger" id="btnquery" onclick="queryinfo()">查询废钢出库记录</button>
        </div>

        <table class="layui-hide" id="test" lay-filter="demo"></table>
    </div>



            <script src="~/Scripts/jquery-3.3.1.min.js" type="text/javascript"></script>
            <script src="~/plugin/layui/layui.all.js" type="text/javascript"></script>
            <script>
                var flag = "1";

                var waiting;
                function startwaiting() {
                    waiting = layer.load(0, { shade: [0.1, '#fff'] });
                }
                function stopwaiting() {
                    layer.close(waiting);
                }

                function scrapout() {
                 
                    $('#btnup').prop('disabled', true);
                    startwaiting();
                    $.ajax({
                        type: "get",
                        url: "/home/gettest",
                        dataType: "json",
                        data: {
                            userid: document.getElementById("userid").value,
                            slot: document.getElementById("slot").value,
                            fg: document.getElementById("fg").value,
                            weight: document.getElementById("weight").value,
                            fg1: document.getElementById("fg1").value,
                            weight1: document.getElementById("weight1").value,
                            st: document.getElementById("st").value,
                            stweight: document.getElementById("stweight").value,
                        },
                        success: function (data) {
                            if (data.flag == "200") {
                                document.getElementById("weight").value = "0";
                                document.getElementById("weight1").value = "0";
                                document.getElementById("stweight").value = "0";
                                document.getElementById("slot").value = "";
                                layer.msg(data.message);
                            }
                            else {
                                layer.msg(data.message, {
                                    time: 5000 //5s后自动关闭
                                });
                            }
                            //fillFormFields(formId, data, callback);
                        },
                        complete: function (xhr, ts) {
                            //stopwaiting();
                        }
                    });
                    stopwaiting();
                    $('#btnup').prop('disabled', false);

                    //layer.confirm('确认要提交数据吗？', {
                    //    btn: ['确认', '取消'] //按钮

                    //}, function () {
                    //    if (flag == "1") {
                    //        flag = "2";
                           
                    //        flag = "1";
                    //    }                     
                    //}, function () {
                    //    layer.msg('已取消', {
                    //        time: 5000 //20s后自动关闭
                    //    });
                    //});
     
                }

                function queryinfo() {
                    //$('#btnquery').prop('disabled', true);
                    layui.table.render({
                        elem: test,                     
                        url: '/home/ckjl',
                        page: true,                    
                        cols: [[

                            { field: 'logtime', title: '时间' }
                            , { field: 'slot', title: '斗号' }
                            , { field: 'amount', title: '重量' }
                            , { field: 'userid', title: '操作人' }
                            , { field: 'heatid', title: '炉号' }                          
                        ]]
                    });
                }

                function successmsg(msg) {
                    layer.msg("操作成功!" + msg, { icon: 1 });
                }
            </script>
</body>
</html>
